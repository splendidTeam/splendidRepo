<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>

<link rel="stylesheet" type="text/css" href="../css/main.css" />
<link rel="stylesheet" type="text/css"
	href="../css/demo.css" />

<script type="text/javascript" src="../scripts/jquery/jquery-1.9.1.js"></script>
<script type="text/javascript">
	var $j = jQuery.noConflict();
</script>

<script type="text/javascript"
	src="../scripts/jquery/jquery-migrate-1.2.0.js"></script>
<script type="text/javascript"
	src="../scripts/jquery/jqueryui/jquery-ui-1.10.2.custom.js"></script>
<script type="text/javascript"
	src="../scripts/jquery/jqueryui/jquery-ui-timepicker-addon.js"></script>

<script type="text/javascript"
	src="../scripts/loxia2/jquery.loxiacore-2.js"></script>
<script type="text/javascript"
	src="../scripts/loxia2/jquery.loxiainput-2.js"></script>
<script type="text/javascript"
	src="../scripts/loxia2/jquery.loxiaselect-2.js"></script>
<script type="text/javascript"
	src="../scripts/loxia2/jquery.loxiatable-2.js"></script>
<script type="text/javascript"
	src="../scripts/loxia2/jquery.loxia.locale-zh-CN.js"></script>
	<script type="text/javascript" src="../scripts/loxia2/jquery.loxia.locale-zh-CN.js"></script>
	<script type="text/javascript" src="../scripts/jquery/jqueryui/jquery.ui.datepicker-zh-CN.js"></script>


<script type="text/javascript"
	src="../scripts/nebula/jquery.nebula.protostar-1.js"></script>
<script type="text/javascript"
	src="../scripts/jquery/ztree/jquery.ztree.all-3.5.js"></script>

<script type="text/javascript">
	var setting = {

		check : {
			enable : true
		},
		view : {
			showIcon : false,
			fontCss : getFontCss
		},
		edit : {
			enable : false,
			showRenameBtn : false
		},
		data : {
			keep : {
				parent : false,
				leaf : false
			},
			key : {
				title : "name"
			},
			simpleData : {
				enable : true
			}
		},
		callback : {
			onClick : onClick
		}
	};
	var categorySetting = {
			check: {
				enable: true,
				chkStyle: "radio",
				radioType: "all"
			},
			view: {
				dblClickExpand: false,
				showIcon:false
			},
			data: {
				simpleData: {
					enable: true
				}
			},
			callback: {
				onClick: onClick1,
				onCheck: onCheck1,
			}
		};

	var categoryzNodes =[
					{id:19, pId:0, name: "ROOT",open:true},
					{id:20, pId:19, name: "电脑",open:true},
					{id:21, pId:20, name: "电脑整机",open:false},
					{id:22, pId:21, name: "笔记本",open:false},
					{id:23, pId:21, name: "平板电脑配件",open:false},
					{id:24, pId:21, name: "笔记本配件",open:false},
					{id:25, pId:20, name: "电脑外设",open:false},
					{id:26, pId:20, name: "网络产品",open:false},
					{id:27, pId:25, name: "键盘",open:false},
					{id:28, pId:25, name: "摄像头",open:false},
					{id:29, pId:25, name: "线缆",open:false},
					{id:30, pId:25, name: "耳机",open:false},
					{id:31, pId:26, name: "网络设备",open:false},
					{id:32, pId:26, name: "路由器",open:false},
					{id:33, pId:26, name: "网卡",open:false},
					{id:34, pId:26, name: "网络存储",open:false},
					{id:35, pId:19, name: "家电",open:true},
					{id:36, pId:19, name: "汽车",open:true},
					{id:37, pId:35, name: "厨房电器",open:false},
					{id:38, pId:35, name: "个人护理",open:false},
					{id:39, pId:35, name: "生活电器",open:false},
					{id:40, pId:35, name: "视听影音",open:false},
					{id:46, pId:37, name: "榨汁机",open:false},
					{id:47, pId:37, name: "搅拌机",open:false},
					{id:48, pId:37, name: "空炸机",open:false},
					{id:49, pId:37, name: "咖啡机",open:false},
					{id:50, pId:37, name: "电饭煲",open:false},
					{id:51, pId:37, name: "电压力煲",open:false},
					{id:52, pId:37, name: "其他",open:false},
					{id:53, pId:38, name: "个人护理",open:false},
					{id:54, pId:38, name: "剃须刀",open:false},
					{id:55, pId:38, name: "电动牙刷",open:false},
					{id:56, pId:38, name: "电吹风",open:false},
					{id:57, pId:38, name: "脱/剃毛器",open:false},
					{id:58, pId:39, name: "生活电器",open:false},
					{id:59, pId:39, name: "吸尘器",open:false},
					{id:60, pId:39, name: "电熨斗",open:false},
					{id:61, pId:39, name: "挂烫机",open:false},
					{id:62, pId:39, name: "空气净化器",open:false},
					{id:63, pId:39, name: "其他",open:false},
					{id:64, pId:40, name: "视听数码",open:false},
					{id:65, pId:40, name: "液晶电视",open:false},
					{id:66, pId:40, name: "音响",open:false},
					{id:67, pId:40, name: "iphone等苹果音乐底座",open:false},
					{id:68, pId:40, name: "数码配件",open:false},
					{id:69, pId:36, name: "汽车用品",open:false},
					{id:70, pId:36, name: "汽车美容",open:false},
					{id:71, pId:69, name: "汽车用品",open:false},
					{id:72, pId:69, name: "车用香水",open:false},
					{id:73, pId:69, name: "车用头枕",open:false},
					{id:74, pId:69, name: "车用腰枕",open:false},
					{id:75, pId:69, name: "小套饰",open:false},
					{id:76, pId:69, name: "方向盘套",open:false},
					{id:77, pId:69, name: "汽车座垫",open:false},
					{id:78, pId:69, name: "儿童安全座椅",open:false},
					{id:79, pId:69, name: "通用座套",open:false},
					{id:80, pId:69, name: "其他",open:false},
					{id:82, pId:70, name: "其他",open:false}
	        
	 ];
	function onClick(event, treeId, treeNode) {
		alert(treeId);
		refreshData();
	}

	function getFontCss(treeId, treeNode) {
		return (!!treeNode.highlight) ? {
			color : "#333",
			"background-color" : "yellow"
		} : {
			color : "#333",
			"font-weight" : "normal",
			"background-color" : ""
		};
	}

	$j(document).ready(function() {
		loxia.init({
			debug : true,
			region : 'zh-CN'
		});
		nps.init();
	
		//显示category 分类 下拉树
	    $j.fn.zTree.init($j("#categoryDemo"), categorySetting, categoryzNodes);
		//让商品分类下拉树只有叶子节点可选
		var treeObjCategory = $j.fn.zTree.getZTreeObj("categoryDemo");
		//1.将所有的节点转换为简单 Array 格式
		var nodesCategory = treeObjCategory.transformToArray(treeObjCategory.getNodes());
		for(var i = 0;i<nodesCategory.length;i++){
			//2.如果此节点为父节点 或者 为ROOT节点 ，则让此节点没有radio选框
			if(nodesCategory[i].isParent || nodesCategory[i].id == 0){
				nodesCategory[i].nocheck = true;
			}
			treeObjCategory.refresh();
		}
	    $j("#category").click(function() {
			var cityObj = $j(this);
			var cityOffset = $j(this).offset();
			$j("#categoryContent").css({left:cityOffset.left + "px", top:cityOffset.top + cityObj.outerHeight() + "px"}).slideDown("fast");

			$j("body").bind("mousedown", onBodyDown1);
		});

		$j("#table1").loxiasimpletable({
			page : true,
			
			cols : [ {
				label : "<input type='checkbox'/>",
				template : "drawCheckbox"
			}, {
				name : "code",
				label : "商品编码"
			} , {
				name : "name",
				label : "商品名称"
			}, {
				name : "type",
				label : "所属分类"
			}, {
				name : "brand",
				label : "所属行业"
			}, {name:"lifecycle",
				label:"是否有效",
				type:"yesno"
			}, {
				name : "createDate",
				label : "创建时间"
			}],
			dataurl : {
				currentPage : 1,
				totalPages : 10,
				count : 99,
				size : 10,
				sortStr : "createtime desc",
				firstPage : true,
				lastPage : false,
				items : [ {
					name : "耐克运动鞋",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "运动鞋"
				}, {
					name : "耐克T恤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "服装"
				}, {
					name : "耐克休闲裤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "裤子"
				}, {
					name : "耐克休闲帽",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "帽子"
				}, {
					name : "耐克运动鞋",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "运动鞋"
				}, {
					name : "耐克T恤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}, {
					name : "耐克休闲裤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}, {
					name : "耐克休闲帽",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}, {
					name : "耐克运动鞋",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "运动鞋"
				}, {
					name : "耐克T恤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}, {
					name : "耐克休闲裤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}, {
					name : "耐克休闲帽",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}

				]
			}
		});

		
		$j("#table2").loxiasimpletable({
			page : true,

			cols : [ {
				label : "<input type='checkbox'/>",
				template : "drawCheckbox"
			}, {
				name : "code",
				label : "商品编码"
			} , {
				name : "name",
				label : "商品名称"
			}, {
				name : "type",
				label : "所属分类"
			}, {
				name : "brand",
				label : "所属行业"
			}, {name:"lifecycle",
				label:"是否有效",
				type:"yesno"
			}, {
				name : "createDate",
				label : "创建时间"
			}],
			dataurl : {
				currentPage : 1,
				totalPages : 10,
				count : 99,
				size : 5,
				sortStr : "createtime desc",
				firstPage : true,
				lastPage : false,
				items : [ {
					name : "耐克运动鞋",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "运动鞋"
				}, {
					name : "耐克T恤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "服装"
				}, {
					name : "耐克休闲裤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "裤子"
				}, {
					name : "耐克休闲帽",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "帽子"
				}, {
					name : "耐克运动鞋",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "运动鞋"
				}, {
					name : "耐克T恤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0001",
					type : "无"
				}, {
					name : "耐克休闲裤",
					brand : "nike",
					lifecycle : "有效",
					createDate : "2013-01-08",
					code : "NIKE 0009",
					type : "无"
				}

				]
			}
		});
		
		refreshData();

		var zNodes = [ {
			id : 0,
			pId : -1,
			name : "root",
			open : true,
			nocheck : true
		}, {
			id : 1,
			pId : 0,
			name : "鞋",
			open : true,
			nocheck : true
		}, {
			id : 11,
			pId : 1,
			name : "运动鞋"
		}, {
			id : 12,
			pId : 1,
			name : "休闲鞋",
			nocheck : true
		}, {
			id : 121,
			pId : 12,
			name : "休闲鞋1"
		}, {
			id : 122,
			pId : 12,
			name : "休闲鞋2"
		}, {
			id : 2,
			pId : 0,
			name : "服装",
			open : true,
			nocheck : true
		}, {
			id : 21,
			pId : 2,
			name : "T恤"
		}, {
			id : 22,
			pId : 2,
			name : "裤子"
		}, {
			id : 23,
			pId : 2,
			name : "卫衣"
		}, {
			id : 3,
			pId : 0,
			name : "配件",
			open : true,
			nocheck : true
		}, {
			id : 31,
			pId : 3,
			name : "帽子"
		}, {
			id : 32,
			pId : 3,
			name : "手套"
		}, {
			id : 33,
			pId : 3,
			name : "袜子"
		} ];

		$j.fn.zTree.init($j("#tree"), setting, zNodes);
		$j(".button.orange.removesort").on("click", function(){
	        alert("脱离成功")
	    });
		$j(".button.orange.addsort").on("click", function(){
	        alert("加入成功")
	    });
		
	});
	function drawCheckbox(data, args, idx) {
		return "<input type='checkbox' name='id' value='"
				+ loxia.getObject("name", data) + "'/>";
	}

	function refreshData() {
		$j("#table1").loxiasimpletable("refresh", {
			currentPage : 1,
			totalPages : 10,
			count : 99,
			size : 10,
			sortStr : "createtime asc",
			firstPage : true,
			lastPage : false,
			items : [ {
				name : "耐克运动鞋",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "运动鞋"
			}, {
				name : "耐克T恤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "服装"
			}, {
				name : "耐克休闲裤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "裤子"
			}, {
				name : "耐克休闲帽",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "帽子"
			}, {
				name : "耐克运动鞋",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "运动鞋"
			}, {
				name : "耐克T恤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "无"
			}, {
				name : "耐克休闲裤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "无"
			}, {
				name : "耐克休闲帽",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "无"
			}, {
				name : "耐克运动鞋",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "运动鞋"
			}, {
				name : "耐克T恤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "无"
			}, {
				name : "耐克休闲裤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "无"
			}, {
				name : "耐克休闲帽",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0003",
				type : "无"
			} ]
		});

		
		$j("#table2").loxiasimpletable("refresh", {
			currentPage : 1,
			totalPages : 5,
			count : 99,
			size : 10,
			sortStr : "createtime asc",
			firstPage : true,
			lastPage : false,
			items : [ {
				name : "耐克运动鞋",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "运动鞋"
			}, {
				name : "耐克T恤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "服装"
			}, {
				name : "耐克休闲裤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "裤子"
			}, {
				name : "耐克休闲帽",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "帽子"
			}, {
				name : "耐克运动鞋",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "运动鞋"
			}, {
				name : "耐克T恤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0001",
				type : "无"
			}, {
				name : "耐克休闲裤",
				brand : "nike",
				lifecycle : "有效",
				createDate : "2013-01-08",
				code : "NIKE 0002",
				type : "无"
			}  ]
		});
	}
	function onClick1(e, treeId, treeNode) {
		var zTree = $j.fn.zTree.getZTreeObj("categoryDemo");
		zTree.checkNode(treeNode, !treeNode.checked, null, true);
		return false;
	}

	function onCheck1(e, treeId, treeNode) {
		var zTree = $j.fn.zTree.getZTreeObj("categoryDemo"),
		nodes = zTree.getCheckedNodes(true),
		v = "";
		for (var i=0, l=nodes.length; i<l; i++) {
			v += nodes[i].name + ",";
		}
		if (v.length > 0 ) v = v.substring(0, v.length-1);
		var cityObj = $j("#category");
		cityObj.attr("value", v);
		hideMenu1();
	}
	function hideMenu1() {
		$j("#categoryContent").fadeOut("fast");
		$j("body").unbind("mousedown", onBodyDown1);
	}
	function onBodyDown1(event) {
		if (!(event.target.id == "menuBtn" || event.target.id == "category" || event.target.id == "categoryContent" || $j(event.target).parents("#categoryContent").length>0)) {
			hideMenu1();
		}
	}
</script>

<script type="text/javascript" src="../scripts/main.js"></script>

</head>

<body>
    <div class="content-box width-percent100">
		<div class="ui-title1"><img src="../images/wmi/blacks/32x32/tag.png">商品分类
		                <input type="button" value="脱离分类" title="脱离分类"  class="button orange removesort" />
                        <input type="button" value="加入分类" title="加入分类"  class="button orange addsort" />
						
		</div>
        <div class="ui-block">
            <div class="ui-block-content ui-block-content-lb">
                <table>
                <tr>
                        <td><label>商品编码　</label></td>
                        <td><input loxiatype="input" placeholder="平台商品编码"/></td>
                        <td><label>商品名称　</label></td>
                        <td><input loxiatype="input" placeholder="商品显示名称"/></td>
                        <td><label>是否有效　</label></td>
                        <td><select loxiatype="select">
                                <option value="0">不限</option>
                                <option value="1">有效</option>
                                <option value="2">无效</option>
                        </select></td>
                        <td ><label>所属行业　</label></td>
                        <td><input type="text" name="category" id="category" class="ui-loxia-default" loxiatype="input" placeholder="点击选择所属行业" /></td>
                    </tr>
                    <tr>
                        <td><label>商品创建时间　</label></td>
                        <td> <input loxiaType="date"
                                mandatory="false" id="createStartDate"
                                name="q_date_createDate"></input>
                        </td>
                        <td align="center"><label>——</label></td>
                         <td><input id="createEndDate"
                            loxiaType="date"
                            mandatory="false"></input>
                        </td>


                        <td><label>商品上架时间　</label></td>
                        <td> <input loxiaType="date"
                                mandatory="false" id="appearStartDate"
                                name="q_date_createDate"></input>
                        </td>
                        <td align="center"><label>——</label></td>

                        <td> <input type="text" id="appearEndDate"
                            name="q_date_startDate"
                            loxiaType="date" mandatory="false"></input>
                        </td>
                    </tr>
                </table>
                <div class="button-line1">
                <a href="javascript:void(0);"
                   class="func-button search"><span>查询</span></a>
                </div>
            </div>
        </div>
        <div class="ui-block ui-block-fleft w240">
            <div class="ui-block-content ui-block-content-lb">
                <div class="tree-control">
                    <input type="text" id="key" loxiatype="input" placeholder="输入关键字快速定位" />
                </div>
                <ul id="tree" class="ztree"></ul>

            </div>
        </div>
        <div class="ui-block ml240">
            <div class="ui-block-content" style="padding-top:0">
                <form action="/property/list.json" id="searchForm">
                    <div class="ui-tag-change">
                        <ul class="tag-change-ul">
                            <li class="memberbase">商品列表</li>
                            <li class="memberbase">未分类商品</li>
                        </ul>
                        <div class="tag-change-content">
                            <div class="tag-change-in">
                                <div class="border-grey" id="table1" caption="商品列表"></div>
                            </div>
                            <div class="tag-change-in">
                                <div class="border-grey" id="table2" caption="未分类商品" ></div>
                            </div>
                        </div>
                    </div>
                    <div class="button-line">
                        <input type="button" value="加入分类" title="加入分类"  class="button orange addsort" />
						<input type="button" value="脱离分类" title="脱离分类"  class="button orange removesort"/>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div id="categoryContent" class="menuContent" style="z-index:999;display:none; position: absolute; background-color:#f0f6e4;border: 1px solid #617775;padding:3px;">
	   <ul id="categoryDemo" class="ztree" style="margin-top:0; width:180px; height: 100%;"></ul>
    </div>
</body>
</html>

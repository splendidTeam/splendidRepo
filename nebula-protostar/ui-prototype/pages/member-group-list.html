<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>

<link rel="stylesheet" type="text/css" href="../css/main.css"/>

<script type="text/javascript" src="../scripts/jquery/jquery-1.9.1.js"></script>


<script type="text/javascript" src="../scripts/jquery/jquery-migrate-1.2.0.js"></script>
<script type="text/javascript" src="../scripts/jquery/jqueryui/jquery-ui-1.10.2.custom.js"></script>
<script type="text/javascript" src="../scripts/jquery/jqueryui/jquery-ui-timepicker-addon.js"></script>

<script type="text/javascript" src="../scripts/loxia2/jquery.loxiacore-2.js"></script>
<script type="text/javascript" src="../scripts/loxia2/jquery.loxiainput-2.js"></script>
<script type="text/javascript" src="../scripts/loxia2/jquery.loxiaselect-2.js"></script>
<script type="text/javascript" src="../scripts/loxia2/jquery.loxiatable-2.js"></script>
<script type="text/javascript" src="../scripts/loxia2/jquery.loxia.locale-zh-CN.js"></script>
<script type="text/javascript" src="../scripts/jquery/jqueryui/jquery.ui.datepicker-zh-CN.js"></script>
<script type="text/javascript" src="../scripts/nebula/jquery.nebula.protostar-1.js"></script>



<script type="text/javascript">
var $j = jQuery.noConflict();

function formatGender(val){
	if(val == 0) return "正常";
	else return "禁用";
}

function formatCurrency(val){
	if(val == undefined || val == null || isNaN(val))
		return "--";
	return "￥" + val.toFixed(2);
}

function editMember(data, args, idx){
	return "<a href='javascript:void(0);' class='func-button modify'>修改</a><a  href='javascript:void(0);' class='func-button remove'>删除</a><a  href='javascript:void(0);' class='func-button disable'>启/禁用</a><a href='javascript:void(0);' class='func-button edit'>编辑成员</a>";
}

function drawCheckbox(data, args, idx){
	return "<input type='checkbox' name='id' value='" + loxia.getObject("name", data)+"'/>";
}




function confirmDelete(){
	nps.confirm("确认删除","确定要删除选定的用户么？", function(){
        alert("Deleted");
        refreshData();
    });
}


$j(document).ready(function(){
	loxia.init({debug: true, region: 'zh-CN'});
    nps.init();
	
	$j("#table1").loxiasimpletable({
		page: true,
		
		cols:
		[
		{label:"<input type='checkbox'/>",witdh:"5%", template:"drawCheckbox"},
		{name:"groupcode",label:"编码",width:"15%"},
		{name:"groupname",label:"名称",width:"15%"},
		{name:"lifecycle",label:"生命周期",width:"15%"},
		{name:"createtime",label:"创建时间",width:"15%"},
		{name:"membercount",label:"关联会员数",width:"15%"},
		{label:"操作",width:"15%", template:"editMember"}
		],
		dataurl : {
			currentPage:1, totalPages: 10, count: 99, size: 10, sortStr:"date desc", firstPage: true, lastPage: false,
			items: [
					{groupcode:"001",groupname:"1分组1",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"12"},
					{groupcode:"002",groupname:"1分组",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"22"},
					{groupcode:"003",groupname:"1分组",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"32"},
					{groupcode:"004",groupname:"1分组3",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"42"},
					{groupcode:"005",groupname:"1分组4",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"52"},
					{groupcode:"006",groupname:"1分组5",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"52"},
					{groupcode:"007",groupname:"1分组6",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"62"},
					{groupcode:"008",groupname:"1分组7",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"72"},
					{groupcode:"009",groupname:"1分组8",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"82"},
					{groupcode:"010",groupname:"1分组9",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"92"}
					
			]
			}
	});

	refreshData();
	$j('#startTime').datetimepicker({
		showSecond: true,
		timeFormat: 'hh:mm:ss',
		stepHour: 1,
		stepMinute: 1,
		stepSecond: 1,
		maxDate:"-1D",
		showOn:"focus",
		changeMonth: true,
		changeYear: true,
		onClose: function(dateText, inst) {
		        var endDateTextBox = $j('#endTime');
		        if (endDateTextBox.val() != '') {
		            var testStartDate = $j('#startTime').datetimepicker('getDate');
		            var testEndDate = $j('#endTime').datetimepicker('getDate');
		            if (testStartDate > testEndDate)
		                endDateTextBox.val(dateText);
		        }
		        else {
		            //endDateTextBox.val(dateText);
		        }
		        var start = $j('#startTime').datetimepicker('getDate');
		        $j('#endTime').datetimepicker('option', 'minDate', new Date(start.getTime()));
		 },
		 onSelect: function(selectedDateTime){
		        
		 }
	}); 
	$j('#endTime').datetimepicker({
		showSecond: true,
		timeFormat: 'hh:mm:ss',
		stepHour: 1,
		stepMinute: 1,
		stepSecond: 1,
		maxDate:"-1D",
		showOn:"focus",
		changeMonth: true,
		changeYear: true,
		onClose: function(dateText, inst) {
	        var startDateTextBox = $j('#startTime');
	        if (startDateTextBox.val() != '') {
	            var testStartDate = $j('#startTime').datetimepicker('getDate');
	            var testEndDate = $j('#endTime').datetimepicker('getDate');
	            if (testStartDate > testEndDate)
	                startDateTextBox.val(dateText);
	        }
	        else {
	            //startDateTextBox.val(dateText);
	        }
	        var end = $j('#endTime').datetimepicker('getDate');
	        $j('#startTime').datetimepicker('option', 'maxDate', new Date(end.getTime()));
	    },
	    onSelect: function(selectedDateTime){
	        
	    }
	});  
});

function refreshData(){

	$j("#table1").loxiasimpletable("refresh",{
		currentPage:1, totalPages: 10, count: 99, size: 10, sortStr:"date asc", firstPage: true, lastPage: false,
		items: [
					{groupcode:"001",groupname:"分组1",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"12"},
					{groupcode:"002",groupname:"分组",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"22"},
					{groupcode:"003",groupname:"分组",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"32"},
					{groupcode:"004",groupname:"分组3",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"42"},
					{groupcode:"005",groupname:"分组4",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"52"},
					{groupcode:"006",groupname:"分组5",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"52"},
					{groupcode:"007",groupname:"分组6",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"62"},
					{groupcode:"008",groupname:"分组7",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"72"},
					{groupcode:"009",groupname:"分组8",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"82"},
					{groupcode:"010",groupname:"分组9",lifecycle:"有效", createtime:"2013-03-05", lifecycle:"有效",membercount:"92"}
				]
		});

    $j(".button.addmembergroup").click(function(){
    	 window.open("add-member-group.html");
    });

    $j(".func-button.modify").on("click",function(){
        window.open("member-group-modify.html");
    });

    $j(".func-button.edit").on("click",function(){
        window.open("edit-group.html");
    });
    
    $j(".func-button.remove").on("click",function(){
        nps.confirm("确认删除","确定要删除选定的分组么？", function(){
            alert("Deleted");
            refreshData();
        });
    });
}

</script>

<script type="text/javascript" src="../scripts/main.js"></script>

</head>

<body>

<div class="content-box width-percent100">
	<div class="ui-title1">会员分组管理
		<input class="button orange addmembergroup" type="button" value="新增">
    </div>

    <table class="ui-block-content">
        <tr>
            <td><label>编码：</label></td>
            <td>
                <span id="searchkeytext"><input type="text" loxiaType="input" mandatory="false"></input></span>
            </td>
			<td><label>名称：</label></td>
            <td>
                <span id="searchkeytext"><input type="text" loxiaType="input" mandatory="false"></input></span>
            </td>
            <td><label>状态：</label></td>
           <td>
                <span id="searchkeytext">
					<select id="orgSelect" loxiaType="select" checkmaster="chooseFilterOrg" >				
						<option value="2">不限</option>
						<option value="3">有效</option>
						<option value="4">无效</option>
					</select>
				</span>
            </td>
            <td><label>创建时间：</label></td>
            <td>
                <span id="searchkeytext"> <input type="text" id="startTime" name="startTime" value=""loxiaType="input" mandatory="false" /></span>
            </td>
            <td>-</td>
            <td>
                 <span id="searchkeytext"> <input type="text" id="endTime" name="startTime" value=""loxiaType="input" mandatory="false" /></span>
            </td>
           
            <td>
             <a href="#" class="func-button"><label class="ficon-true"></label><span>搜索</span></a> 
            </td>
            
        </tr>
    </table>
    
    <div class="ui-block">
    	<div class="ui-block-title1">会员分组列表</div>
   	 	<div class="table-border0 border-blue" id="table1"></div>   
    </div>
    
    
	
    <div class="button-line">




         
    </div>
</div>


</body>
</html>

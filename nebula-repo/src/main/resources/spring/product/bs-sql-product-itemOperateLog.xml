<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

	<bean id="ItemOperateLog.findByItemId" class="loxia.dao.support.DynamicQueryHolder">
		<description>根据itemId查询ItemOperateLog的ids</description>
		<constructor-arg>
			<value>
				<![CDATA[ 
					select id from t_pd_item_operate_log where item_id = :itemId order by create_time desc
                 ]]>
			</value>
		</constructor-arg>
	</bean>
	
	<bean id="ItemOperateLog.updateItemOperateLog" class="loxia.dao.support.DynamicQueryHolder">
		<description>更新日志信息</description>
		<constructor-arg>
			<value>
				<![CDATA[ 
					UPDATE 
					
						t_pd_item_operate_log
						
					SET
					
						#if($soldOutOperatorName)
			       			 sold_out_operator_name=:soldOutOperatorName,
			       			 sold_out_time = now(),
			       		#end
			       		
			       		
			       		
			       		#if($pushOperatorName)
			       			 push_operator_name=:pushOperatorName,
			       			 push_time = now(),
			       		#end
			       		
			       		
			       		
			       		#if($activeTime)
			       			 active_time=:activeTime,
			       		#end
		       		
		       		
		       				update_time = now();
		       				
		       		WHERE
		       		 
		       			id=:id
                 ]]>
			</value>
		</constructor-arg>
	</bean>
</beans>
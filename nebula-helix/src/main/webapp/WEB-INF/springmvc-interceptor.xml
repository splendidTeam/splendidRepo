<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">
	<mvc:annotation-driven>
		<mvc:argument-resolvers>
			<bean class="com.baozun.nebula.web.bind.ArrayCommandMethodArgumentResolver"/>
		</mvc:argument-resolvers>
	</mvc:annotation-driven>
    
	<mvc:resources mapping="/scripts/**" location="/scripts/" />
	<mvc:resources mapping="/css/**" location="/css/" />
	<mvc:resources mapping="/images/**" location="/images/" />
	<mvc:resources mapping="/resources/**" location="/resources/" />
    <mvc:interceptors>
        <!--*************openSessionInViewInterceptor ************* -->
        <bean id="openSessionInViewInterceptor"
              class="org.springframework.orm.hibernate3.support.OpenSessionInViewInterceptor">
            <property name="sessionFactory" ref="sessionFactory"/>
        </bean>
        <!--******* localeChangeInterceptor******** -->
        <bean id="localeChangeInterceptor" class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
            <property name="paramName" value="siteLanguage"/>
        </bean>
    </mvc:interceptors>
    
    <bean id="browsingHistoryResolver" class="com.baozun.nebula.web.interceptor.browsingHistory.BrowsingHistoryCookieResolver">
		<!--
			<property name="cookieName"></property>
			<property name="cookieMaxAge"></property>
			<property name="maxCount"></property>
		-->
		<property name="symmetricEncryption">
			<bean class="com.baozun.nebula.utils.security.symmetric.SymmetricEncryption" lazy-init="true">
				<!-- 第1个参数是加密解密方式 可选值 参见 com.feilong.tools.security.symmetric.SymmetricType -->
				<constructor-arg index="0" value="AES" />
				<!-- 第2个参数是密钥字符串 一旦设定了就不要随便改了 -->
				<constructor-arg index="1" value="a1b2helix88qwert" />
			</bean>
		</property>
	</bean>

	<!-- 自定义的拦截器 -->
	<mvc:interceptors>
		<mvc:interceptor>
			<mvc:mapping path="/item/*" />
			<mvc:mapping path="/product/*/detail.htm" />

			<bean class="com.baozun.store.web.interceptor.StoreItemBrowsingHistoryInterceptor">
				<property name="browsingHistoryResolver" ref="browsingHistoryResolver" />
			</bean>
		</mvc:interceptor>
	</mvc:interceptors>
</beans>